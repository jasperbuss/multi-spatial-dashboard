get_stat_measurements <- function(id, phen){
url <- "https://api.opensensemap.org"
path <- paste('//boxes/data?boxId=',id,'&from-date=2018-06-17T00:00:00Z&to-date=2018-09-17T23:50:00Z&phenomenon=',phen,'&format=json', sep = "")
# path <- paste('//boxes/data?boxId=5ae76e9a223bd80019136179,59c67b5ed67eb50011666dbb,5a30ea5375a96c000f012fe0,5b22736f1fef04001bd66707,5abd221b850005001b1aff35,5a0c30489fd3c20011115fb7,570bad2b45fd40c8197f13a2&from-date=2018-05-16T00:00:00Z&to-date=2018-06-07T123:50:00Z&phenomenon=Temperatur&format=json', sep = "")
#path <- paste('//boxes/data?boxId=5ae36a64223bd8001973462f&from-date=2018-05-16T00:00:00Z&to-date=2018-06-07T123:50:00Z&phenomenon=Temperatur&format=json', sep = "")
#  path <- paste('/statistics/descriptive?boxId=',id,'&phenomenon=Temperatur&from-date=2017-06-25T14:00:00Z&to-date=2018-07-25T15:00:00Z&operation=max&window=604800000&format=json',sep="")
raw.result <- GET(url = url, path = path)
this.raw.content <- rawToChar(raw.result$content)
this.content <- fromJSON(this.raw.content)
#this.content$createdAt <- as.POSIXct(this.content$createdAt,format="%Y-%m-%dT%H:%M:%OS")
this.content$createdAt <- as.POSIXct(this.content$createdAt)
this.content$value <- as.numeric(this.content$value)
Hours<-cut(this.content$createdAt, "1 hour",right = TRUE)
h_mean <- aggregate(this.content[,2],by=list(Hours),FUN=mean)
names(h_mean)[1] <- "Datum"
return(h_mean)
}
get_stat_measurements_si <- function(id, phen){
url <- "https://api.opensensemap.org"
path <- paste('//boxes/data?boxId=',id,'&from-date=2018-09-10T00:00:00Z&to-date=2018-09-17T23:50:00Z&phenomenon=',phen,'&format=json', sep = "")
# path <- paste('//boxes/data?boxId=5ae76e9a223bd80019136179,59c67b5ed67eb50011666dbb,5a30ea5375a96c000f012fe0,5b22736f1fef04001bd66707,5abd221b850005001b1aff35,5a0c30489fd3c20011115fb7,570bad2b45fd40c8197f13a2&from-date=2018-05-16T00:00:00Z&to-date=2018-06-07T123:50:00Z&phenomenon=Temperatur&format=json', sep = "")
#path <- paste('//boxes/data?boxId=5ae36a64223bd8001973462f&from-date=2018-05-16T00:00:00Z&to-date=2018-06-07T123:50:00Z&phenomenon=Temperatur&format=json', sep = "")
#  path <- paste('/statistics/descriptive?boxId=',id,'&phenomenon=Temperatur&from-date=2017-06-25T14:00:00Z&to-date=2018-07-25T15:00:00Z&operation=max&window=604800000&format=json',sep="")
raw.result <- GET(url = url, path = path)
this.raw.content <- rawToChar(raw.result$content)
this.content <- fromJSON(this.raw.content)
# this.content$createdAt <- as.POSIXct(this.content$createdAt,format="%Y-%m-%dT%H:%M:%OS")
this.content$createdAt <- as.POSIXct(this.content$createdAt)
this.content$value <- as.numeric(this.content$value)
Hours<-cut(this.content$createdAt, "1 hour",right = TRUE)
h_mean <- aggregate(this.content[,2],by=list(Hours),FUN=mean)
names(h_mean)[1] <- "Datum"
return(h_mean)
}
runApp('db.R')
runApp('db.R')
#fra_dr <- get_stat_measurements(Frankfurt, Luftdruck)
write.csv(fra_dr, "./csv/fra_dr.csv")
fra_dr <- get_stat_measurements(Frankfurt, Luftdruck)
runApp('db.R')
runApp('db.R')
runApp('db.R')
ros_dr <- get_stat_measurements(Rostock, Luftdruck)
runApp('db.R')
runApp('db.R')
wies_dr <- get_stat_measurements(Wiesbaden, Luftdruck)
runApp('db.R')
runApp('db.R')
mai_drs <- get_stat_measurements_si(Mainz, Luftdruck)
#mai_temps <- get_stat_measurements_si(Mainz, temps)
#write.csv(mai_temps, "./csv/mai_ts.csv")
#mai_humis <- get_stat_measurements_si(Mainz, feuchte)
#write.csv(mai_humis, "./csv/mai_hs.csv")
mai_temps <- read.csv("./csv/mai_ts.csv") %>% mutate(phenomena = "Temperatur")
mai_humis <- read.csv("./csv/mai_hs.csv") %>% mutate(phenomena = "Luftfeuchtigkeit")
mai_temps
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
#dd_temps <- get_stat_measurements_si(Duesseldorf, temps)
#write.csv(dd_temps, "./csv/dd_ts.csv")
dd_humis <- get_stat_measurements_si(Duesseldorf, feuchte)
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
ggplot(ham_dr , aes(x = as.Date(Datum), colour = phenomena )) +
ggtitle("Luftdruck")+
xlab('Datum') + ylab('hPa') +
#    geom_line(aes(y = x))+
geom_line(aes(y = rollmean(x, 8, fill = list(NA, NULL, NA))))+
scale_colour_manual(values = c("blue", "red"))  +
labs(y = "Luftdruck [hPa]",
x = "Datum",
colour = "Legende")+
theme(legend.position = c(0.9, 0.9))
ggplot(ham_drs , aes(x = as.Date(Datum), colour = phenomena )) +
ggtitle("Luftdruck")+
xlab('Datum') + ylab('hPa') +
#    geom_line(aes(y = x))+
geom_line(aes(y = rollmean(x, 8, fill = list(NA, NULL, NA))))+
scale_colour_manual(values = c("blue", "red"))  +
labs(y = "Luftdruck [hPa]",
x = "Datum",
colour = "Legende")+
theme(legend.position = c(0.9, 0.9))
ggplot(ham_drs , aes(x = as.Date(Datum), colour = phenomena )) +
ggtitle("Luftdruck")+
xlab('Datum') + ylab('hPa') +
#    geom_line(aes(y = x))+
geom_line(aes(y = rollmean(x, 1, fill = list(NA, NULL, NA))))+
scale_colour_manual(values = c("blue", "red"))  +
labs(y = "Luftdruck [hPa]",
x = "Datum",
colour = "Legende")+
theme(legend.position = c(0.9, 0.9))
ggplot(muns_pms, aes(x = as.Date(Datum), colour = phenomena )) +
ggtitle("Feinstaub Konzentration")+
xlab('Datum') + ylab('ug / m³') +
geom_line(aes(y = rollmean(x, 1, fill = list(NA, NULL, NA))))+
scale_y_continuous(sec.axis = dup_axis())+
scale_colour_manual(values = c("blue", "red"))  +
labs(y = "ug / m³",
x = "Datum",
colour = "Partikelgröße")+
theme(legend.position = c(0.8, 0.9))
#write.csv(muns_humis, "./csv/muns_hs.csv")
muns_pms <- bind_rows(muns_pm10, muns_pm25) %>% group_by(phenomena)
runApp('db.R')
han_pms <- bind_rows(han_pm10s, han_pm25s) %>% group_by(phenomena)
source('~/Spatial-Dashboard/R-Script/tempmte.R')
Munch_pm10 <- get_stat_measurements(München, PM10)
write.csv(Munch_pm10, "./csv/munch_pm10.csv")
Munch_pm25 <- get_stat_measurements(München, PM25)
write.csv(Munch_pm25, "./csv/munch_pm25.csv")
Munch_pm10 <- read.csv("./csv/munch_10.csv") %>% mutate(phenomena = "PM10")
Munch_pm25 <- read.csv("./csv/munch_25.csv") %>% mutate(phenomena = "PM25")
Munch_pm <- bind_rows(Munch_pm10, Munch_pm25) %>% group_by(phenomena)
Munch_pm10s <- get_stat_measurements_si(München, PM10)
write.csv(Munch_pm10s, "./csv/munch_pm10s.csv")
Munch_pm25s <- get_stat_measurements_si(München, PM25)
write.csv(Munch_pm25s, "./csv/munch_pm25s.csv")
Munch_pm10s <- read.csv("./csv/munch_pm10s.csv") %>% mutate(phenomena = "PM10")
Munch_pm25s <- read.csv("./csv/munch_pm25s.csv") %>% mutate(phenomena = "PM25")
Munch_pms <- bind_rows(Munch_pm10s, Munch_pm25s) %>% group_by(phenomena)
ham_pm10 <- get_stat_measurements(Hamburg, PM10)
write.csv(ham_pm10, "./csv/ham_pm10.csv")
ham_pm25 <- get_stat_measurements(Hamburg, PM25)
write.csv(ham_pm25, "./csv/ham_pm25.csv")
ham_pm10 <- read.csv("./csv/ham_10.csv") %>% mutate(phenomena = "PM10")
ham_pm25 <- read.csv("./csv/ham_25.csv") %>% mutate(phenomena = "PM25")
ham_pm <- bind_rows(ham_pm10, ham_pm25) %>% group_by(phenomena)
ham_pm10s <- get_stat_measurements_si(Hamburg, PM10)
write.csv(ham_pm10s, "./csv/ham_pm10s.csv")
ham_pm25s <- get_stat_measurements_si(Hamburg, PM25)
write.csv(ham_pm25s, "./csv/ham_pm25s.csv")
ham_pm10s <- read.csv("./csv/ham_pm10s.csv") %>% mutate(phenomena = "PM10")
ham_pm25s <- read.csv("./csv/ham_pm25s.csv") %>% mutate(phenomena = "PM25")
ham_pms <- bind_rows(ham_pm10s, ham_pm25s) %>% group_by(phenomena)
han_pm10 <- get_stat_measurements(Hannover, PM10)
write.csv(han_pm10, "./csv/han_pm10.csv")
han_pm25 <- get_stat_measurements(Hannover, PM25)
write.csv(han_pm25, "./csv/han_pm25.csv")
han_pm10 <- read.csv("./csv/han_10.csv") %>% mutate(phenomena = "PM10")
han_pm25 <- read.csv("./csv/han_25.csv") %>% mutate(phenomena = "PM25")
han_pm <- bind_rows(han_pm10, han_pm25) %>% group_by(phenomena)
han_pm10s <- get_stat_measurements_si(Hannover, PM10)
write.csv(han_pm10s, "./csv/han_pm10s.csv")
han_pm25s <- get_stat_measurements_si(Hannover, PM25)
write.csv(han_pm25s, "./csv/han_pm25s.csv")
han_pm10s <- read.csv("./csv/han_pm10s.csv") %>% mutate(phenomena = "PM10")
han_pm25s <- read.csv("./csv/han_pm25s.csv") %>% mutate(phenomena = "PM25")
han_pms <- bind_rows(han_pm10s, han_pm25s) %>% group_by(phenomena)
fra_pm10 <- get_stat_measurements(Frankfurt, PM10)
write.csv(fra_pm10, "./csv/fra_pm10.csv")
fra_pm25 <- get_stat_measurements(Frankfurt, PM25)
write.csv(fra_pm25, "./csv/fra_pm25.csv")
fra_pm10 <- read.csv("./csv/fra_10.csv") %>% mutate(phenomena = "PM10")
fra_pm25 <- read.csv("./csv/fra_25.csv") %>% mutate(phenomena = "PM25")
fra_pm <- bind_rows(fra_pm10, fra_pm25) %>% group_by(phenomena)
fra_pm10s <- get_stat_measurements_si(Frankfurt, PM10)
write.csv(fra_pm10s, "./csv/fra_pm10s.csv")
fra_pm25s <- get_stat_measurements_si(Frankfurt, PM25)
write.csv(fra_pm25s, "./csv/fra_pm25s.csv")
fra_pm10s <- read.csv("./csv/fra_pm10s.csv") %>% mutate(phenomena = "PM10")
fra_pm25s <- read.csv("./csv/fra_pm25s.csv") %>% mutate(phenomena = "PM25")
fra_pms <- bind_rows(fra_pm10s, fra_pm25s) %>% group_by(phenomena)
muns_pm10 <- get_stat_measurements(Münster, PM10)
write.csv(muns_pm10, "./csv/muns_pm10.csv")
muns_pm25 <- get_stat_measurements(Münster, PM25)
write.csv(muns_pm25, "./csv/muns_pm25.csv")
muns_pm10 <- read.csv("./csv/muns_10.csv") %>% mutate(phenomena = "PM10")
muns_pm25 <- read.csv("./csv/muns_25.csv") %>% mutate(phenomena = "PM25")
muns_pm <- bind_rows(muns_pm10, muns_pm25) %>% group_by(phenomena)
muns_pm10s <- get_stat_measurements_si(Münster, PM10)
write.csv(muns_pm10s, "./csv/muns_pm10s.csv")
muns_pm25s <- get_stat_measurements_si(Münster, PM25)
write.csv(muns_pm25s, "./csv/muns_pm25s.csv")
muns_pm10s <- read.csv("./csv/muns_pm10s.csv") %>% mutate(phenomena = "PM10")
muns_pm25s <- read.csv("./csv/muns_pm25s.csv") %>% mutate(phenomena = "PM25")
muns_pms <- bind_rows(muns_pm10s, muns_pm25s) %>% group_by(phenomena)
ber_pm10 <- get_stat_measurements(Berlin, PM10)
write.csv(ber_pm10, "./csv/ber_pm10.csv")
ber_pm25 <- get_stat_measurements(Berlin, PM25)
write.csv(ber_pm25, "./csv/ber_pm25.csv")
ber_pm10 <- read.csv("./csv/ber_10.csv") %>% mutate(phenomena = "PM10")
ber_pm25 <- read.csv("./csv/ber_25.csv") %>% mutate(phenomena = "PM25")
ber_pm <- bind_rows(ber_pm10, ber_pm25) %>% group_by(phenomena)
ber_pm10s <- get_stat_measurements_si(Berlin, PM10)
write.csv(ber_pm10s, "./csv/ber_pm10s.csv")
ber_pm25s <- get_stat_measurements_si(Berlin, PM25)
write.csv(ber_pm25s, "./csv/ber_pm25s.csv")
ber_pm10s <- read.csv("./csv/ber_pm10s.csv") %>% mutate(phenomena = "PM10")
ber_pm25s <- read.csv("./csv/ber_pm25s.csv") %>% mutate(phenomena = "PM25")
ber_pms <- bind_rows(ber_pm10s, ber_pm25s) %>% group_by(phenomena)
kol_pm10 <- get_stat_measurements(Köln, PM10)
write.csv(kol_pm10, "./csv/kol_pm10.csv")
kol_pm25 <- get_stat_measurements(Köln, PM25)
write.csv(kol_pm25, "./csv/kol_pm25.csv")
kol_pm10 <- read.csv("./csv/kol_10.csv") %>% mutate(phenomena = "PM10")
kol_pm25 <- read.csv("./csv/kol_25.csv") %>% mutate(phenomena = "PM25")
kol_pm <- bind_rows(kol_pm10, kol_pm25) %>% group_by(phenomena)
kol_pm10s <- get_stat_measurements_si(Köln, PM10)
write.csv(kol_pm10s, "./csv/kol_pm10s.csv")
kol_pm25s <- get_stat_measurements_si(Köln, PM25)
write.csv(kol_pm25s, "./csv/kol_pm25s.csv")
kol_pm10s <- read.csv("./csv/kol_pm10s.csv") %>% mutate(phenomena = "PM10")
kol_pm25s <- read.csv("./csv/kol_pm25s.csv") %>% mutate(phenomena = "PM25")
kol_pms <- bind_rows(kol_pm10s, kol_pm25s) %>% group_by(phenomena)
stu_pm10 <- get_stat_measurements(Stuttgart, PM10)
write.csv(stu_pm10, "./csv/stu_pm10.csv")
stu_pm25 <- get_stat_measurements(Stuttgart, PM25)
write.csv(stu_pm25, "./csv/stu_pm25.csv")
stu_pm10 <- read.csv("./csv/stu_10.csv") %>% mutate(phenomena = "PM10")
stu_pm25 <- read.csv("./csv/stu_25.csv") %>% mutate(phenomena = "PM25")
stu_pm <- bind_rows(stu_pm10, stu_pm25) %>% group_by(phenomena)
stu_pm10s <- get_stat_measurements_si(Stuttgart, PM10)
write.csv(stu_pm10s, "./csv/stu_pm10s.csv")
stu_pm25s <- get_stat_measurements_si(Stuttgart, PM25)
write.csv(stu_pm25s, "./csv/stu_pm25s.csv")
stu_pm10s <- read.csv("./csv/stu_pm10s.csv") %>% mutate(phenomena = "PM10")
stu_pm25s <- read.csv("./csv/stu_pm25s.csv") %>% mutate(phenomena = "PM25")
stu_pms <- bind_rows(stu_pm10s, stu_pm25s) %>% group_by(phenomena)
klt_pm10 <- get_stat_measurements(Kaiserslauternt, PM10)
write.csv(klt_pm10, "./csv/klt_pm10.csv")
klt_pm25 <- get_stat_measurements(Kaiserslauternt, PM25)
write.csv(klt_pm25, "./csv/klt_pm25.csv")
klt_pm10 <- read.csv("./csv/klt_10.csv") %>% mutate(phenomena = "PM10")
klt_pm25 <- read.csv("./csv/klt_25.csv") %>% mutate(phenomena = "PM25")
klt_pm <- bind_rows(klt_pm10, klt_pm25) %>% group_by(phenomena)
klt_pm10s <- get_stat_measurements_si(Kaiserslauternt, PM10)
write.csv(klt_pm10s, "./csv/klt_pm10s.csv")
klt_pm25s <- get_stat_measurements_si(Kaiserslauternt, PM25)
write.csv(klt_pm25s, "./csv/klt_pm25s.csv")
klt_pm10s <- read.csv("./csv/klt_pm10s.csv") %>% mutate(phenomena = "PM10")
klt_pm25s <- read.csv("./csv/klt_pm25s.csv") %>% mutate(phenomena = "PM25")
klt_pms <- bind_rows(klt_pm10s, klt_pm25s) %>% group_by(phenomena)
old_pm10 <- get_stat_measurements(Oldenburg, PM10)
write.csv(old_pm10, "./csv/old_pm10.csv")
old_pm25 <- get_stat_measurements(Oldenburg, PM25)
write.csv(old_pm25, "./csv/old_pm25.csv")
old_pm10 <- read.csv("./csv/old_10.csv") %>% mutate(phenomena = "PM10")
old_pm25 <- read.csv("./csv/old_25.csv") %>% mutate(phenomena = "PM25")
old_pm <- bind_rows(old_pm10, old_pm25) %>% group_by(phenomena)
old_pm10s <- get_stat_measurements_si(Oldenburg, PM10)
write.csv(old_pm10s, "./csv/old_pm10s.csv")
old_pm25s <- get_stat_measurements_si(Oldenburg, PM25)
write.csv(old_pm25s, "./csv/old_pm25s.csv")
old_pm10s <- read.csv("./csv/old_pm10s.csv") %>% mutate(phenomena = "PM10")
old_pm25s <- read.csv("./csv/old_pm25s.csv") %>% mutate(phenomena = "PM25")
old_pms <- bind_rows(old_pm10s, old_pm25s) %>% group_by(phenomena)
lpz_pm10 <- get_stat_measurements(Leipzig, PM10)
write.csv(lpz_pm10, "./csv/lpz_pm10.csv")
lpz_pm25 <- get_stat_measurements(Leipzig, PM25)
write.csv(lpz_pm25, "./csv/lpz_pm25.csv")
lpz_pm10 <- read.csv("./csv/lpz_10.csv") %>% mutate(phenomena = "PM10")
lpz_pm25 <- read.csv("./csv/lpz_25.csv") %>% mutate(phenomena = "PM25")
lpz_pm <- bind_rows(lpz_pm10, lpz_pm25) %>% group_by(phenomena)
lpz_pm10s <- get_stat_measurements_si(Leipzig, PM10)
write.csv(lpz_pm10s, "./csv/lpz_pm10s.csv")
lpz_pm25s <- get_stat_measurements_si(Leipzig, PM25)
write.csv(lpz_pm25s, "./csv/lpz_pm25s.csv")
lpz_pm10s <- read.csv("./csv/lpz_pm10s.csv") %>% mutate(phenomena = "PM10")
lpz_pm25s <- read.csv("./csv/lpz_pm25s.csv") %>% mutate(phenomena = "PM25")
lpz_pms <- bind_rows(lpz_pm10s, lpz_pm25s) %>% group_by(phenomena)
ros_pm10 <- get_stat_measurements(Rostock, PM10)
write.csv(ros_pm10, "./csv/ros_pm10.csv")
ros_pm25 <- get_stat_measurements(Rostock, PM25)
write.csv(ros_pm25, "./csv/ros_pm25.csv")
ros_pm10 <- read.csv("./csv/ros_10.csv") %>% mutate(phenomena = "PM10")
ros_pm25 <- read.csv("./csv/ros_25.csv") %>% mutate(phenomena = "PM25")
ros_pm <- bind_rows(ros_pm10, ros_pm25) %>% group_by(phenomena)
ros_pm10s <- get_stat_measurements_si(Rostock, PM10)
write.csv(ros_pm10s, "./csv/ros_pm10s.csv")
ros_pm25s <- get_stat_measurements_si(Rostock, PM25)
write.csv(ros_pm25s, "./csv/ros_pm25s.csv")
ros_pm10s <- read.csv("./csv/ros_pm10s.csv") %>% mutate(phenomena = "PM10")
ros_pm25s <- read.csv("./csv/ros_pm25s.csv") %>% mutate(phenomena = "PM25")
ros_pms <- bind_rows(ros_pm10s, ros_pm25s) %>% group_by(phenomena)
sar_pm10 <- get_stat_measurements(Saarbruecken, PM10)
write.csv(sar_pm10, "./csv/sar_pm10.csv")
sar_pm25 <- get_stat_measurements(Saarbruecken, PM25)
write.csv(sar_pm25, "./csv/sar_pm25.csv")
sar_pm10 <- read.csv("./csv/sar_10.csv") %>% mutate(phenomena = "PM10")
sar_pm25 <- read.csv("./csv/sar_25.csv") %>% mutate(phenomena = "PM25")
sar_pm <- bind_rows(sar_pm10, sar_pm25) %>% group_by(phenomena)
sar_pm10s <- get_stat_measurements_si(Saarbruecken, PM10)
write.csv(sar_pm10s, "./csv/sar_pm10s.csv")
sar_pm25s <- get_stat_measurements_si(Saarbruecken, PM25)
write.csv(sar_pm25s, "./csv/sar_pm25s.csv")
sar_pm10s <- read.csv("./csv/sar_pm10s.csv") %>% mutate(phenomena = "PM10")
sar_pm25s <- read.csv("./csv/sar_pm25s.csv") %>% mutate(phenomena = "PM25")
sar_pms <- bind_rows(sar_pm10s, sar_pm25s) %>% group_by(phenomena)
sar_pms
kl_pm10 <- get_stat_measurements(Kiel, PM10)
write.csv(kl_pm10, "./csv/kl_pm10.csv")
kl_pm25 <- get_stat_measurements(Kiel, PM25)
write.csv(kl_pm25, "./csv/kl_pm25.csv")
kl_pm10 <- read.csv("./csv/kl_10.csv") %>% mutate(phenomena = "PM10")
kl_pm25 <- read.csv("./csv/kl_25.csv") %>% mutate(phenomena = "PM25")
kl_pm <- bind_rows(kl_pm10, kl_pm25) %>% group_by(phenomena)
kl_pm10s <- get_stat_measurements_si(Kiel, PM10)
write.csv(kl_pm10s, "./csv/kl_pm10s.csv")
kl_pm25s <- get_stat_measurements_si(Kiel, PM25)
write.csv(kl_pm25s, "./csv/kl_pm25s.csv")
kl_pm10s <- read.csv("./csv/kl_pm10s.csv") %>% mutate(phenomena = "PM10")
kl_pm25s <- read.csv("./csv/kl_pm25s.csv") %>% mutate(phenomena = "PM25")
kl_pms <- bind_rows(kl_pm10s, kl_pm25s) %>% group_by(phenomena)
osna_pm10 <- get_stat_measurements(Osnabrück, PM10)
write.csv(osna_pm10, "./csv/osna_pm10.csv")
osna_pm25 <- get_stat_measurements(Osnabrück, PM25)
write.csv(osna_pm25, "./csv/osna_pm25.csv")
osna_pm10 <- read.csv("./csv/osna_10.csv") %>% mutate(phenomena = "PM10")
osna_pm25 <- read.csv("./csv/osna_25.csv") %>% mutate(phenomena = "PM25")
osna_pm <- bind_rows(osna_pm10, osna_pm25) %>% group_by(phenomena)
osna_pm10s <- get_stat_measurements_si(Osnabrück, PM10)
write.csv(osna_pm10s, "./csv/osna_pm10s.csv")
osna_pm25s <- get_stat_measurements_si(Osnabrück, PM25)
write.csv(osna_pm25s, "./csv/osna_pm25s.csv")
osna_pm10s <- read.csv("./csv/osna_pm10s.csv") %>% mutate(phenomena = "PM10")
osna_pm25s <- read.csv("./csv/osna_pm25s.csv") %>% mutate(phenomena = "PM25")
osna_pms <- bind_rows(osna_pm10s, osna_pm25s) %>% group_by(phenomena)
mag_pm10 <- get_stat_measurements(Magdeburg, PM10)
write.csv(mag_pm10, "./csv/mag_pm10.csv")
mag_pm25 <- get_stat_measurements(Magdeburg, PM25)
write.csv(mag_pm25, "./csv/mag_pm25.csv")
mag_pm10 <- read.csv("./csv/mag_10.csv") %>% mutate(phenomena = "PM10")
mag_pm25 <- read.csv("./csv/mag_25.csv") %>% mutate(phenomena = "PM25")
mag_pm <- bind_rows(mag_pm10, mag_pm25) %>% group_by(phenomena)
mag_pm10s <- get_stat_measurements_si(Magdeburg, PM10)
write.csv(mag_pm10s, "./csv/mag_pm10s.csv")
mag_pm25s <- get_stat_measurements_si(Magdeburg, PM25)
write.csv(mag_pm25s, "./csv/mag_pm25s.csv")
mag_pm10s <- read.csv("./csv/mag_pm10s.csv") %>% mutate(phenomena = "PM10")
mag_pm25s <- read.csv("./csv/mag_pm25s.csv") %>% mutate(phenomena = "PM25")
mag_pms <- bind_rows(mag_pm10s, mag_pm25s) %>% group_by(phenomena)
wies_pm10 <- get_stat_measurements(Wiesbaden, PM10)
write.csv(wies_pm10, "./csv/wies_pm10.csv")
wies_pm25 <- get_stat_measurements(Wiesbaden, PM25)
write.csv(wies_pm25, "./csv/wies_pm25.csv")
wies_pm10 <- read.csv("./csv/wies_10.csv") %>% mutate(phenomena = "PM10")
wies_pm25 <- read.csv("./csv/wies_25.csv") %>% mutate(phenomena = "PM25")
wies_pm <- bind_rows(wies_pm10, wies_pm25) %>% group_by(phenomena)
wies_pm10s <- get_stat_measurements_si(Wiesbaden, PM10)
write.csv(wies_pm10s, "./csv/wies_pm10s.csv")
wies_pm25s <- get_stat_measurements_si(Wiesbaden, PM25)
write.csv(wies_pm25s, "./csv/wies_pm25s.csv")
wies_pm10s <- read.csv("./csv/wies_pm10s.csv") %>% mutate(phenomena = "PM10")
wies_pm25s <- read.csv("./csv/wies_pm25s.csv") %>% mutate(phenomena = "PM25")
wies_pms <- bind_rows(wies_pm10s, wies_pm25s) %>% group_by(phenomena)
mai_pm10 <- get_stat_measurements(Mainz, PM10)
write.csv(mai_pm10, "./csv/mai_pm10.csv")
mai_pm25 <- get_stat_measurements(Mainz, PM25)
write.csv(mai_pm25, "./csv/mai_pm25.csv")
mai_pm10 <- read.csv("./csv/mai_10.csv") %>% mutate(phenomena = "PM10")
mai_pm25 <- read.csv("./csv/mai_25.csv") %>% mutate(phenomena = "PM25")
mai_pm <- bind_rows(mai_pm10, mai_pm25) %>% group_by(phenomena)
mai_pm10s <- get_stat_measurements_si(Mainz, PM10)
write.csv(mai_pm10s, "./csv/mai_pm10s.csv")
mai_pm25s <- get_stat_measurements_si(Mainz, PM25)
write.csv(mai_pm25s, "./csv/mai_pm25s.csv")
mai_pm10s <- read.csv("./csv/mai_pm10s.csv") %>% mutate(phenomena = "PM10")
mai_pm25s <- read.csv("./csv/mai_pm25s.csv") %>% mutate(phenomena = "PM25")
mai_pms <- bind_rows(mai_pm10s, mai_pm25s) %>% group_by(phenomena)
kr_pm10 <- get_stat_measurements(Karlsruhe, PM10)
write.csv(kr_pm10, "./csv/kr_pm10.csv")
kr_pm25 <- get_stat_measurements(Karlsruhe, PM25)
write.csv(kr_pm25, "./csv/kr_pm25.csv")
kr_pm10 <- read.csv("./csv/kr_10.csv") %>% mutate(phenomena = "PM10")
kr_pm25 <- read.csv("./csv/kr_25.csv") %>% mutate(phenomena = "PM25")
kr_pm <- bind_rows(kr_pm10, kr_pm25) %>% group_by(phenomena)
kr_pm10s <- get_stat_measurements_si(Karlsruhe, PM10)
write.csv(kr_pm10s, "./csv/kr_pm10s.csv")
kr_pm25s <- get_stat_measurements_si(Karlsruhe, PM25)
write.csv(kr_pm25s, "./csv/kr_pm25s.csv")
kr_pm10s <- read.csv("./csv/kr_pm10s.csv") %>% mutate(phenomena = "PM10")
kr_pm25s <- read.csv("./csv/kr_pm25s.csv") %>% mutate(phenomena = "PM25")
kr_pms <- bind_rows(kr_pm10s, kr_pm25s) %>% group_by(phenomena)
sw_pm10 <- get_stat_measurements(Schwerin, PM10)
write.csv(sw_pm10, "./csv/sw_pm10.csv")
sw_pm25 <- get_stat_measurements(Schwerin, PM25)
write.csv(sw_pm25, "./csv/sw_pm25.csv")
sw_pm10 <- read.csv("./csv/sw_10.csv") %>% mutate(phenomena = "PM10")
sw_pm25 <- read.csv("./csv/sw_25.csv") %>% mutate(phenomena = "PM25")
sw_pm <- bind_rows(sw_pm10, sw_pm25) %>% group_by(phenomena)
sw_pm10s <- get_stat_measurements_si(Schwerin, PM10)
write.csv(sw_pm10s, "./csv/sw_pm10s.csv")
sw_pm25s <- get_stat_measurements_si(Schwerin, PM25)
write.csv(sw_pm25s, "./csv/sw_pm25s.csv")
sw_pm10s <- read.csv("./csv/sw_pm10s.csv") %>% mutate(phenomena = "PM10")
sw_pm25s <- read.csv("./csv/sw_pm25s.csv") %>% mutate(phenomena = "PM25")
sw_pms <- bind_rows(sw_pm10s, sw_pm25s) %>% group_by(phenomena)
rb_pm10 <- get_stat_measurements(Regensburg, PM10)
write.csv(rb_pm10, "./csv/rb_pm10.csv")
rb_pm25 <- get_stat_measurements(Regensburg, PM25)
write.csv(rb_pm25, "./csv/rb_pm25.csv")
rb_pm10 <- read.csv("./csv/rb_10.csv") %>% mutate(phenomena = "PM10")
rb_pm25 <- read.csv("./csv/rb_25.csv") %>% mutate(phenomena = "PM25")
rb_pm <- bind_rows(rb_pm10, rb_pm25) %>% group_by(phenomena)
rb_pm10s <- get_stat_measurements_si(Regensburg, PM10)
write.csv(rb_pm10s, "./csv/rb_pm10s.csv")
rb_pm25s <- get_stat_measurements_si(Regensburg, PM25)
write.csv(rb_pm25s, "./csv/rb_pm25s.csv")
rb_pm10s <- read.csv("./csv/rb_pm10s.csv") %>% mutate(phenomena = "PM10")
rb_pm25s <- read.csv("./csv/rb_pm25s.csv") %>% mutate(phenomena = "PM25")
rb_pms <- bind_rows(rb_pm10s, rb_pm25s) %>% group_by(phenomena)
fl_pm10 <- get_stat_measurements(Flensburg, PM10)
write.csv(fl_pm10, "./csv/fl_pm10.csv")
fl_pm25 <- get_stat_measurements(Flensburg, PM25)
write.csv(fl_pm25, "./csv/fl_pm25.csv")
fl_pm10 <- read.csv("./csv/fl_10.csv") %>% mutate(phenomena = "PM10")
fl_pm25 <- read.csv("./csv/fl_25.csv") %>% mutate(phenomena = "PM25")
fl_pm <- bind_rows(fl_pm10, fl_pm25) %>% group_by(phenomena)
fl_pm10s <- get_stat_measurements_si(Flensburg, PM10)
write.csv(fl_pm10s, "./csv/fl_pm10s.csv")
fl_pm25s <- get_stat_measurements_si(Flensburg, PM25)
write.csv(fl_pm25s, "./csv/fl_pm25s.csv")
fl_pm10s <- read.csv("./csv/fl_pm10s.csv") %>% mutate(phenomena = "PM10")
fl_pm25s <- read.csv("./csv/fl_pm25s.csv") %>% mutate(phenomena = "PM25")
fl_pms <- bind_rows(fl_pm10s, fl_pm25s) %>% group_by(phenomena)
get_stat_measurements <- function(id, phen){
url <- "https://api.opensensemap.org"
path <- paste('//boxes/data?boxId=',id,'&from-date=2018-06-17T00:00:00Z&to-date=2018-09-17T23:50:00Z&phenomenon=',phen,'&format=json', sep = "")
# path <- paste('//boxes/data?boxId=5ae76e9a223bd80019136179,59c67b5ed67eb50011666dbb,5a30ea5375a96c000f012fe0,5b22736f1fef04001bd66707,5abd221b850005001b1aff35,5a0c30489fd3c20011115fb7,570bad2b45fd40c8197f13a2&from-date=2018-05-16T00:00:00Z&to-date=2018-06-07T123:50:00Z&phenomenon=Temperatur&format=json', sep = "")
#path <- paste('//boxes/data?boxId=5ae36a64223bd8001973462f&from-date=2018-05-16T00:00:00Z&to-date=2018-06-07T123:50:00Z&phenomenon=Temperatur&format=json', sep = "")
#  path <- paste('/statistics/descriptive?boxId=',id,'&phenomenon=Temperatur&from-date=2017-06-25T14:00:00Z&to-date=2018-07-25T15:00:00Z&operation=max&window=604800000&format=json',sep="")
raw.result <- GET(url = url, path = path)
this.raw.content <- rawToChar(raw.result$content)
this.content <- fromJSON(this.raw.content)
#this.content$createdAt <- as.POSIXct(this.content$createdAt,format="%Y-%m-%dT%H:%M:%OS")
this.content$createdAt <- as.POSIXct(this.content$createdAt)
this.content$value <- as.numeric(this.content$value)
Hours<-cut(this.content$createdAt, "1 hour",right = TRUE)
h_mean <- aggregate(this.content[,2],by=list(Hours),FUN=mean)
names(h_mean)[1] <- "Datum"
return(h_mean)
}
source("help.R")
runApp('db.R')
library(shiny)
library(shinydashboard)
library(jsonlite)
library(httr)
library(lubridate)
library(sp)
library(opensensmapr)
library(dplyr)
library(fdrtool)
library(sf)
library(units)
library(magrittr)
library(rgdal)
library(rgeos)
library(rintrojs)
library(ggplot2)
library(beeswarm)
library(plotly)
library(ECharts2Shiny)
library(lattice)
library(plyr)
library(zoo)
library(shinyjs)
library(leaflet)
library(gapminder)
setwd("//home/jasper/Spatial-Dashboard/R-Script")
source("help.R")
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
Munch_pm10s <- read.csv("./csv/munch_pm10s.csv") %>% mutate(phenomena = "PM10")
Munch_pm25s <- read.csv("./csv/munch_pm25s.csv") %>% mutate(phenomena = "PM25")
Munch_pm25s <- read.csv("./csv/munch_pm25s.csv") %>% mutate(phenomena = "PM25")
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
runApp('db.R')
